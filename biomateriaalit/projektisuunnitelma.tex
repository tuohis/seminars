%\documentclass[a4paper,12pt]{report}
\documentclass[finnish,12pt]{article}
\usepackage[latin1]{inputenc}
\usepackage[finnish]{babel}
\usepackage{ae,aecompl}

\usepackage[pdftex]{graphicx}
\usepackage{url}
%% Matematiikan fontteja, symboleja ja muotoiluja lisï¿½ï¿½, nï¿½itï¿½ tarvitaan usein
\usepackage{amsfonts,amssymb,amsbsy}
%% Taulukon paketti
%\usepackage{multirow}

%% Vaakasuunnan mitat, ï¿½Lï¿½ KOSKE!
\setlength{\hoffset}{-1in}
\setlength{\oddsidemargin}{35mm}
\setlength{\evensidemargin}{20mm}
\setlength{\textwidth}{15cm}
%% Pystysuunnan mitat, ï¿½Lï¿½ KOSKE!
\setlength{\voffset}{-1.5in}
%\setlength{\headsep}{7mm}
%\setlength{\headheight}{1em}
\setlength{\topmargin}{25mm}
\setlength{\textheight}{24cm}
%% Vasensuora-asettelu, joka opinnï¿½ytteessï¿½ vaaditaan. ï¿½Lï¿½ KOSKE
\setlength{\parindent}{0pt}
\setlength{\parskip}{1ex}

%% bibtex-tyyli
\bibliographystyle{apalike}

% Title Page
\title{AS-0.3200 Projektisuunnitelma: useamman LEDin valaistusjakauma}
\author{Mikko Tuohimaa}
\date{6.2.2011}


\begin{document}
\maketitle
\pagenumbering{arabic}
\setcounter{page}{1}
\begin{abstract}
Tämä on projektisuunnitelma Automaatio- ja systeemitekniikan projektityöt -kurssille.
Työn aiheena on monimuuttujasäätö; työssä suunnitellaan ja rakennetaan järjestelmä,
joka säätää usean LED-valaisimen valaistusjakauman optimaaliseksi indo\-syaniini\-vihreä\-kuvan\-tamiselle
käyttäen hyväksi kamerakuvan histogrammia ja muita ominaisuuksia.
\end{abstract}

\textbf{Avainsanat:} LED, indosyaniinivihreä, kuvantaminen, kuvankäsittely

\section{Työn tarkoitus}
Indosyaniinivihreäkuvantaminen on menetelmä, jossa vereen injektoitu varjoaine (indosyaniinivihreä, \textit{ICG}) fluoresoi
infrapuna-aallonpituuksilla. Kuvantamisessa ihoa valaistaan kapean spektrin IR-valolla, ja kameralla kuvataan 
tämän spektrin poissuodattavan filtterin läpi kudosta. Verisuonet erottuvat, koska veressä oleva aine hehkuu
eri aallonpituudella.

Tässä työssä on tarkoitus toteuttaa säädin, joka säätää useasta IR-LEDistä koostuvan valaisimen
valaistusjakaumaa ja -voimakkuutta kamerakuvan perusteella, tavoitteena optimoida kuvan valotus. 
Järjestelmän tulee toimia reaaliaikaisesti ja vakaasti, koska \textit{ICG}:n puoliintumisaika 
elimistössä on vain joitakin minuutteja.

Suurin ongelma kuvantamisessa on ylivalottuminen, joka kadottaa informaatiota. Alivalottumista voi korjata jälkeenpäin,
mutta sekin on haitta esim. leikkausten aikana. Siispä säätöalgoritmi tulee painottamaan ylivalottumisen estoa enemmän.

Työssä säätöalgoritmin ohjelmoimisen lisäksi mahdollisesti rakennetaan myös itse valaisin ja sen säätöelektroniikka.

\section{Tehtävät ja aikataulu}\label{section:aikataulu}

Projektille on allokoitu 10 tuntia viikossa ja aikataulun mukaan se kattaa ajanjakson 7.2.2011 - 21.3.2011. Tavoite on,
että tuolloin on valmiina toimiva, joskaan ei optimaalinen versio laitteesta. Tämän jälkeen keskitytään parametrien
ja algoritmin virittämiseen mahdollisimman hyviksi.

\subsection{Valaisin}
Valaisin tulee olemaan rakenteeltaan kimppu 780nm aallonpituudella toimivia tehoLEDejä.
Säätöelektroniikkana käytettäneen mikrokontrollerin, tehotransistorin ja kondensaattorin yhdistelmää, jolla voidaan säätää
LEDien virta step-down -hakkuri\-periaatteella.

Valaisin toteutetaan ensimmäisenä. Elektroniikan kasaaminen on triviaalia, tosin alkuvaiheessa se tehdään protolevylle.
Ainut haaste on toteuttaa mikrokontrollerin koodi,
joka toimii liittymänä ohjaussignaalin ja pulssinleveysmodulaation välillä sekä yhteys PC:n ja mikrokontrollerin välille. 
Testit ja yhteydenluonnit mukaanlukien tähän on allokoitu 3 viikkoa (viikot 6-8), jonka jälkeen pitäisi olla olemassa ensimmäinen
toimiva versio.

Sitä mukaa kun projekti ja erityisesti algoritmikoodi kehittyy, voidaan elektroniikkaankin tehdä tarvittaessa muutoksia - siksi 
ensimmäinen versio ei sisällä juurikaan hienouksia ja alustana on protolevy. Lopullinen versio tehdään PCB-levylle.

\subsection{Kamera}
Kamerana käytetään joko Elphelin tai Hamamatsun kameraa ja ohjelmointiympäristöä. Säätöalgoritmi toteutettaneen Pythonilla
tai jollakin muulla korkean tason kielellä, riippuen ohjelmointiympäristön tarjoamista mahdollisuuksista. Kameran ominaisuuksia
tutkitaan myös viikkoina 6-8, jos rakentelulta jää aikaa, mutta pääasiallisesti tähän käytetään viikko 9.

\subsection{Säätöalgoritmi}
Algoritmin perustana on kuvan histogrammi, josta näkee varsin nopeasti mahdollisen yli- tai alivalottumisen. Myös esim.
granulometriaa voidaan käyttää identifioimaan yksityiskohtien kokoa ja sitä kautta verisuonten näkyvyyttä tai ``yhteenkasvamista''.
Mikrokontrollerille annetaan ohjaussignaali (pulssinleveys) kuvainformaation perusteella. Kommunikointiin voidaan käyttää USB- tai
sarjaporttia.

Algoritmin koodaaminen aloitetaan kameran valinnan jälkeen, viikolla 9 tai 10, ja sitä viritettäneen projektin loppuun asti.

\subsection{Projektisuunnitelma}
Liitteessä A on TaskJugglerin projektikaavio, josta näkee tarkemmat tehtävät ja niille suunniteltu ajankäyttö.

\section{Riskit}

Projektissa on muutamia riskejä. Kameran ohjelmointiympäristöstä ei ole kokemusta, joten voi olla että projektin tekeminen 
sen avulla osoittautuu huomattavasti haastavammaksi kuin on luultu. Myös kommunikointi PC:ltä mikrokontrollerille voi olla
hankala toteuttaa; vaikeus riippuu suuresti mikrokontrollerin sisäänrakennetuista kommunikointimahdollisuuksista.

Luonnollisesti aina elektroniikan kanssa töitä tehdessä on riskinä polttaa komponentteja joko huonon suunnittelun tai
rankan käsittelyn seurauksena. Käytetyt komponentit ovat kuitenkin yleisiä eikä korvaavia tuotteita ole vaikea löytää.

\clearpage
\section*{Liite A: projektikaavio}
\begin{figure*}[h]
 \centering
  \includegraphics[scale=0.45]{gantt.png}
\end{figure*}

%\bibliography{seminar}

\end{document}          
